#!/usr/bin/make -f
# -*- makefile -*-
# Sample debian/rules that uses debhelper.
# This file was originally written by Joey Hess and Craig Small.
# As a special exception, when this file is copied by dh-make into a
# dh-make output file, you may use that output file without restriction.
# This special exception was added by Craig Small in version 0.37 of dh-make.

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1
export DH_OPTIONS=-v

#%:
#	dh $@

clean:
	dh_testdir
	rm -rf examples++-mpi/MPICG.o examples++-mpi/MPICG.so DOC/cpfigs/*.pdf
	dh_auto_clean
	dh_clean

build:
	dh_testdir
	./configure  --prefix=/usr
	make -j4 ; \
	cd src/medit ; \
	gcc  -DNDEBUG -O3 -mmmx -msse -msse2 -rdynamic -fPIC   -o ffmedit animat.o cube.o image.o listnum.o mouse.o persp.o stream.o zaldy2.o bbfile.o dlists.o inmsh2.o material.o normal.o picking.o tiles.o camera.o ellipse.o inout.o medit.o param.o psfile.o transform.o cenrad.o geometry.o inout_morice.o menus.o parsar.o scene.o util.o clip.o gisfil.o inout_popenbinaire.o mesh.o parsop.o scissor.o vector.o clipvol.o hash.o items.o mlists.o particle.o sftcpy.o view.o critip.o ilists.o keyboard.o morphing.o path.o status.o zaldy1.o ../libMesh/libMesh.a -lglut -lGLU -lGL -ldl  /usr/lib/gcc/x86_64-linux-gnu/4.5.2/libgfortran.so -lm ; \
	make ; \
	cd ../.. ; \
	make -j4 ; \
	make -j4 --ignore-errors ; \
# 	cd examples++-load ; \
# 	echo `pwd` ; \
# 	./ff-c++ SuperLu.cpp '-lsuperlu' '-I/usr/include/superlu' ; \
# 	./ff-c++ metis.cpp '-lscotchmetis -lmetis -lscotch' '-I/usr/include/metis' ; \
# 	./ff-c++ tetgen.cpp '-ltet' ; \
# 	cd ..
#	dh_auto_test

binary-indep:

binary-arch: 
	dh_testroot
	dh_prep
	dh_installdirs
	dh_auto_install
#	rm -f debian/tmp/usr/bin/*_example
#	chrpath -d debian/tmp/usr/lib/*so.5
#	chrpath -d debian/tmp/usr/lib/python*/dist-packages/_mathgl.so
	dh_install
	dh_installdocs
	dh_installchangelogs
	dh_installexamples
	dh_installman
	dh_installcatalogs
	dh_installcron
	dh_installdebconf
	dh_installemacsen
	dh_installifupdown
	dh_installinfo
	dh_pysupport
	dh_installinit
	dh_installmenu
	dh_installmime
	dh_installmodules
	dh_installlogcheck
	dh_installlogrotate
	dh_installpam
	dh_installppp
	dh_installudev
	dh_installwm
	dh_installxfonts
	dh_bugfiles
	dh_lintian
	dh_gconf
	dh_icons
	dh_perl
	dh_usrlocal
	dh_link
	dh_compress
	dh_fixperms
	dh_strip
	dh_makeshlibs
	dh_shlibdeps
	dh_installdeb
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary: binary-arch binary-indep